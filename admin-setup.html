<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <title>ê´€ë¦¬ì ê³„ì • ì´ˆê¸° ì„¤ì •</title>
    <link rel="stylesheet" href="style.css">
</head>
<body>
    <div class="form-container">
        <h2>ğŸ›  ê´€ë¦¬ì ê³„ì • ìƒì„±</h2>
        <p>ì´ í˜ì´ì§€ëŠ” ê´€ë¦¬ì ê³„ì •ì„ ì²˜ìŒ ë§Œë“¤ ë•Œë§Œ ì‚¬ìš©í•˜ì„¸ìš”.</p>
        <button id="setup-admin-btn" class="btn-submit">ê´€ë¦¬ì ê³„ì •(admin) ìƒì„±í•˜ê¸°</button>
        <p id="status-msg" style="margin-top:10px;"></p>
        <nav><a href="index.html">í™ˆìœ¼ë¡œ ê°€ê¸°</a></nav>
    </div>

    <script type="module">
        import { auth, db } from './firebase-init.js';
        import { createUserWithEmailAndPassword } from "https://www.gstatic.com/firebasejs/10.7.1/firebase-auth.js";
        import { doc, setDoc } from "https://www.gstatic.com/firebasejs/10.7.1/firebase-firestore.js";

        document.getElementById('setup-admin-btn').addEventListener('click', async () => {
            const adminEmail = 'admin@homepage-971ca.local';
            const adminPassword = '123456'; // íŒŒì´ì–´ë² ì´ìŠ¤ ìµœì†Œ 6ìë¦¬

            try {
                const userCredential = await createUserWithEmailAndPassword(auth, adminEmail, adminPassword);
                await setDoc(doc(db, "users", userCredential.user.uid), { 
                    name: "ê´€ë¦¬ì", 
                    email: adminEmail,
                    role: "admin"
                });
                document.getElementById('status-msg').innerText = "ê´€ë¦¬ì ê³„ì • ìƒì„± ì„±ê³µ! ì´ì œ admin / 123456ìœ¼ë¡œ ë¡œê·¸ì¸í•˜ì„¸ìš”.";
            } catch (error) {
                document.getElementById('status-msg').innerText = "ì˜¤ë¥˜: " + error.message;
            }
        });
    </script>
</body>
</html>